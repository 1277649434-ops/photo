<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>æ•™è‚²å¡ç‰‡ç”Ÿæˆå™¨</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <style>
        /* è‡ªå®šä¹‰å­—ä½“å®šä¹‰ */
        @font-face {
            font-family: 'Microsoft YaHei';
            src: local('Microsoft YaHei'), local('PingFang SC');
        }

        body {
            background-color: #f3f4f6;
            font-family: 'Microsoft YaHei', sans-serif;
            -webkit-tap-highlight-color: transparent; /* ç§»é™¤ç‚¹å‡»é«˜äº® */
            overscroll-behavior: none; /* é˜²æ­¢ä¸‹æ‹‰åˆ·æ–°å¹²æ‰°æ‹–æ‹½ */
        }

        /* å¤©è“åˆ°è—é’è‰²æ¸å˜èƒŒæ™¯ */
        .card-container {
            background: linear-gradient(180deg, #87CEEB 0%, rgb(87, 38, 125) 100%);
        }
        
        /* ç»Ÿä¸€çš„å¤§å—é›¾åŒ–ç»ç’ƒæ•ˆæœ */
        .glass-panel {
            background: rgba(255, 255, 255, 0.15);
            box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.2);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.18);
            border-radius: 1rem;
        }

        /* è£…é¥°èƒŒæ™¯ */
        .wave-decor {
            position: absolute;
            top: 40%;
            left: -10%;
            width: 120%;
            height: 60%;
            background: radial-gradient(circle, rgba(255,255,255,0.08) 0%, rgba(255,255,255,0) 70%);
            transform: rotate(-15deg);
            z-index: 0;
            pointer-events: none;
        }

        /* å­—ä½“æ ·å¼ï¼šå¾®è½¯é›…é»‘ + æ–œä½“ + åŠ ç²— */
        .custom-text-style {
            font-family: 'Microsoft YaHei', sans-serif;
            font-style: italic;
            font-weight: bold;
        }

        input[type="file"] {
            display: none;
        }

        .content-layer {
            position: relative;
            z-index: 10;
        }

        /* ä¿®æ­£æˆªå›¾åç§» */
        #capture-area {
            overflow: hidden; 
            box-sizing: border-box;
            user-select: none; /* é˜²æ­¢æ‹–æ‹½æ—¶é€‰ä¸­æ–‡å­— */
        }

        /* ç»“æœæ¨¡æ€æ¡† */
        #resultModal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.9);
            z-index: 9999;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 20px;
            touch-action: none;
        }

        #resultImg {
            -webkit-touch-callout: default !important;
            -webkit-user-select: none;
            user-select: none;
            pointer-events: auto !important;
            touch-action: auto;
        }
        
        /* åˆ·æ–°æŒ‰é’®æ ·å¼ */
        .refresh-btn {
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        .text-wrapper:hover .refresh-btn {
            opacity: 1;
        }

        /* --- æ ‡æ³¨å·¥å…·æ ·å¼ --- */
        
        /* è´´çº¸å®¹å™¨ */
        .sticker-container {
            position: absolute;
            z-index: 30;
            user-select: none;
            touch-action: none;
            /* é»˜è®¤é€‰ä¸­æ ·å¼ï¼šè™šçº¿æ¡† */
            border: 1px dashed transparent; 
        }
        
        /* é€‰ä¸­çŠ¶æ€çš„è´´çº¸ */
        .sticker-container.selected {
            border-color: rgba(255, 255, 255, 0.8);
            background-color: rgba(255, 255, 255, 0.1);
        }

        .sticker-content {
            font-size: 3rem; /* åˆå§‹å¤§å° */
            line-height: 1;
            filter: drop-shadow(0 2px 4px rgba(0,0,0,0.2));
            pointer-events: none; /* è®©ç‚¹å‡»ç©¿é€åˆ°å®¹å™¨ */
        }

        /* æ“æ§æŠŠæ‰‹åŸºç¡€æ ·å¼ */
        .control-handle {
            position: absolute;
            width: 24px;
            height: 24px;
            background: white;
            border-radius: 50%;
            box-shadow: 0 2px 5px rgba(0,0,0,0.3);
            display: none; /* é»˜è®¤éšè—ï¼Œé€‰ä¸­æ—¶æ˜¾ç¤º */
            align-items: center;
            justify-content: center;
            font-size: 14px;
            z-index: 40;
        }
        
        .sticker-container.selected .control-handle {
            display: flex;
        }

        /* ç§»åŠ¨æŠŠæ‰‹ (å³ä¸Šè§’) */
        .move-handle {
            top: -12px;
            right: -12px;
            cursor: move;
            color: #4F46E5;
            border: 2px solid #4F46E5;
        }

        /* ç¼©æ”¾æŠŠæ‰‹ (å³ä¸‹è§’) */
        .resize-handle {
            bottom: -12px;
            right: -12px;
            cursor: nwse-resize;
            color: #EF4444;
            border: 2px solid #EF4444;
        }

        /* çº¢æ¡†æ ·å¼ (åœ†è§’) */
        .red-box {
            position: absolute;
            border: 3px solid #ff0000;
            border-radius: 12px; /* åœ†è§’çŸ©å½¢ */
            z-index: 30;
            pointer-events: auto;
            cursor: pointer;
            box-shadow: 0 0 4px rgba(0,0,0,0.3);
        }
        .red-box:hover {
            background-color: rgba(255, 0, 0, 0.1);
        }
        
        /* çˆ†ç‚¸å›¾æ¡†æ ·å¼ */
        .explosion-box {
            position: absolute;
            z-index: 30;
            pointer-events: auto;
            cursor: pointer;
            background-size: 100% 100%;
            background-repeat: no-repeat;
            filter: drop-shadow(0 2px 4px rgba(0,0,0,0.3));
            /* ä½¿ç”¨ SVG data URI ä½œä¸ºèƒŒæ™¯ */
            background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 150' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M10,75 L30,60 L20,40 L50,45 L60,20 L80,40 L100,10 L120,40 L140,20 L150,45 L180,40 L170,60 L190,75 L170,90 L180,110 L150,105 L140,130 L120,110 L100,140 L80,110 L60,130 L50,105 L20,110 L30,90 Z' fill='none' stroke='%23FF0000' stroke-width='4' stroke-linejoin='round'/%3E%3C/svg%3E");
        }
        .explosion-box:hover {
            opacity: 0.8;
        }

        /* æ ‡æ³¨å±‚ */
        #annotation-layer {
            position: absolute;
            inset: 0;
            z-index: 30;
            pointer-events: none; 
        }
        #annotation-layer > * {
            pointer-events: auto;
        }

        /* ç”»å›¾è¦†ç›–å±‚ */
        #drawing-overlay {
            position: absolute;
            inset: 0;
            z-index: 40;
            cursor: crosshair;
            background-color: rgba(0,0,0,0.05);
            display: none;
            touch-action: none;
        }
        
        /* å·¥å…·æ æ ·å¼ */
        .toolbar-btn {
            transition: all 0.2s;
        }
        .toolbar-btn:active {
            transform: scale(0.95);
        }
        .toolbar-btn.active {
            background-color: #fee2e2;
            color: #ef4444;
            border-color: #ef4444;
        }
    </style>
</head>
<body class="min-h-screen flex flex-col items-center py-6 px-4" onclick="deselectAllStickers()">

    <!-- é¡¶éƒ¨æç¤º -->
    <div class="mb-2 text-center text-gray-600 max-w-lg">
        <h1 class="text-2xl font-bold mb-1 text-gray-800">æ•™è‚²å¡ç‰‡ç”Ÿæˆå™¨</h1>
        <p class="text-xs text-gray-500">åŒå‡»æ–‡æœ¬å¯ç¼–è¾‘ | é€‰ä¸­è´´çº¸ä½¿ç”¨æŠŠæ‰‹ç§»åŠ¨/ç¼©æ”¾</p>
    </div>

    <!-- å·¥å…·æ åŒºåŸŸ -->
    <div class="w-full max-w-[480px] bg-white rounded-xl shadow-sm p-3 mb-4 flex flex-col gap-3" onclick="event.stopPropagation()">
        <!-- è´´çº¸é€‰æ‹© -->
        <div class="flex items-center gap-2 overflow-x-auto pb-1 no-scrollbar">
            <span class="text-xs font-bold text-gray-500 whitespace-nowrap">é®æŒ¡è´´çº¸:</span>
            <div class="flex gap-2">
                <button onclick="addSticker('ğŸŒ¸')" class="text-2xl hover:scale-110 transition toolbar-btn">ğŸŒ¸</button>
                <button onclick="addSticker('ğŸŒ¹')" class="text-2xl hover:scale-110 transition toolbar-btn">ğŸŒ¹</button>
                <button onclick="addSticker('ğŸ‡¨ğŸ‡³')" class="text-2xl hover:scale-110 transition toolbar-btn">ğŸ‡¨ğŸ‡³</button>
                <button onclick="addSticker('â­')" class="text-2xl hover:scale-110 transition toolbar-btn">â­</button>
                <button onclick="addSticker('ğŸŒŠ')" class="text-2xl hover:scale-110 transition toolbar-btn">ğŸŒŠ</button>
                <button onclick="addSticker('â›°ï¸')" class="text-2xl hover:scale-110 transition toolbar-btn">â›°ï¸</button>
                <button onclick="addSticker('â˜€ï¸')" class="text-2xl hover:scale-110 transition toolbar-btn">â˜€ï¸</button>
                <button onclick="addSticker('ğŸ')" class="text-2xl hover:scale-110 transition toolbar-btn">ğŸ</button>
            </div>
        </div>
        
        <!-- ç»˜å›¾å·¥å…· -->
        <div class="flex gap-2 border-t pt-2 overflow-x-auto">
            <button id="drawRectBtn" onclick="toggleDrawingMode('rect')" class="flex-1 whitespace-nowrap border border-gray-300 rounded-lg py-2 px-2 text-xs font-bold text-gray-700 flex items-center justify-center gap-1 hover:bg-gray-50 toolbar-btn">
                ğŸ”² åœ†è§’çº¢æ¡†
            </button>
            <button id="drawExpBtn" onclick="toggleDrawingMode('explosion')" class="flex-1 whitespace-nowrap border border-gray-300 rounded-lg py-2 px-2 text-xs font-bold text-gray-700 flex items-center justify-center gap-1 hover:bg-gray-50 toolbar-btn">
                ğŸ’¥ çˆ†ç‚¸å›¾æ¡†
            </button>
        </div>

        <!-- æ¸…é™¤å·¥å…· -->
        <div class="flex gap-2 pt-1">
            <button onclick="clearStickers()" class="flex-1 border border-gray-300 rounded-lg py-2 text-xs font-bold text-gray-600 flex items-center justify-center gap-1 hover:bg-gray-50 toolbar-btn">
                ğŸ§¹ æ¸…è´´çº¸
            </button>
            <button onclick="clearBoxes()" class="flex-1 border border-gray-300 rounded-lg py-2 text-xs font-bold text-gray-600 flex items-center justify-center gap-1 hover:bg-gray-50 toolbar-btn">
                ğŸ—‘ï¸ æ¸…æ¡†
            </button>
        </div>
    </div>

    <!-- å¡ç‰‡åŒºåŸŸ -->
    <div id="capture-area" class="card-container rounded-[2rem] shadow-2xl w-full max-w-[480px] relative flex flex-col p-5 sm:p-6 overflow-hidden mx-auto" onclick="event.stopPropagation()">
        
        <!-- èƒŒæ™¯è£…é¥° -->
        <div class="wave-decor"></div>

        <!-- æ ‡æ³¨å±‚ (è´´çº¸å’Œçº¢æ¡†) -->
        <div id="annotation-layer"></div>

        <!-- ç”»å›¾è¦†ç›–å±‚ -->
        <div id="drawing-overlay"></div>

        <div class="content-layer flex flex-col h-full pointer-events-none">
            
            <!-- ç»ç’ƒé¢æ¿ -->
            <div class="glass-panel flex flex-col p-4 sm:p-5 mb-5 sm:mb-6 pointer-events-auto">
                
                <!-- é¡¶éƒ¨æ  -->
                <div class="flex justify-between items-start mb-3 sm:mb-4 border-b border-white/10 pb-3">
                    <div class="relative group cursor-pointer mr-4 flex-shrink-0" onclick="if(!isDrawingMode) document.getElementById('logoInput').click()">
                        <img id="logoImg" src="data:image/png;base64,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" alt="Logo">
                        <div class="absolute inset-0 bg-black/20 hidden group-hover:flex items-center justify-center text-white text-xs rounded transition-all">æ›¿æ¢</div>
                        <input type="file" id="logoInput" accept="image/*" onchange="handleImageUpload(this, 'logoImg')">
                    </div>

                    <div class="flex space-x-1 pt-1">
                        <span class="text-yellow-400 text-base sm:text-lg">â˜…</span>
                        <span class="text-yellow-400 text-base sm:text-lg">â˜…</span>
                        <span class="text-yellow-400 text-base sm:text-lg">â˜…</span>
                        <span class="text-yellow-400 text-base sm:text-lg">â˜…</span>
                        <span class="text-yellow-400 text-base sm:text-lg">â˜…</span>
                    </div>
                </div>

                <!-- ä¸­é—´å†…å®¹ -->
                <div class="flex flex-col mb-3 sm:mb-4">
                    <div class="mb-3 sm:mb-4 relative text-wrapper group">
                        <p id="mainText" contenteditable="true" 
                           class="custom-text-style text-xl sm:text-2xl leading-relaxed text-white p-2 border border-transparent hover:border-white/30 rounded transition-colors outline-none cursor-text drop-shadow-sm pr-8">
                           "åŒå‡»æ–‡å­—å¯ä»¥ç¼–è¾‘ ï¼Œæ¯æ¬¡éƒ½éœ€è¦æ‰‹åŠ¨ä¸Šä¼  logoï¼Œå›¾ç‰‡æ–‡å­—æ›¿æ¢å®Œæˆä»¥åç‚¹å‡»ä¸‹è½½æŒ‰é’®ä¸‹è½½ï¼Œå¦‚æœä¸‹è½½ä¸äº†è¯·åˆ‡æ¢æµè§ˆå™¨ï¼Œå¦‚ edge ç­‰ï¼Œ"
                        </p>
                        <button onclick="changeQuote()" data-html2canvas-ignore="true" class="refresh-btn absolute bottom-2 right-2 p-1.5 rounded-full bg-white/20 hover:bg-white/40 text-white backdrop-blur-sm transition-all" title="æ¢ä¸€å¥">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15" /></svg>
                        </button>
                    </div>

                    <div class="w-full relative group cursor-pointer overflow-hidden rounded-lg bg-black/10" onclick="if(!isDrawingMode) document.getElementById('mainImageInput').click()">
                        <div class="w-full h-full flex items-center justify-center border-2 border-dashed border-white/30 hover:border-white/60 transition-all relative min-h-[200px] sm:min-h-[220px]">
                            <img id="mainImg" src="" class="w-full h-auto object-cover hidden relative z-10" alt="ä¸»è¦å›¾ç‰‡">
                            <div id="mainImgPlaceholder" class="text-white/80 text-center py-10 px-4 absolute z-0 top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-full">
                                <svg class="w-10 h-10 mx-auto mb-2 opacity-80" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg>
                                <p class="text-sm">ç‚¹å‡»ä¸Šä¼ å›¾ç‰‡</p>
                            </div>
                        </div>
                        <input type="file" id="mainImageInput" accept="image/*" onchange="handleMainImageUpload(this)">
                    </div>
                </div>

                <!-- åº•éƒ¨æ  -->
                <div class="flex items-center pt-3 border-t border-white/10">
                    <div class="relative cursor-pointer shrink-0" onclick="if(!isDrawingMode) document.getElementById('avatarInput').click()">
                        <div id="avatarContainer" class="w-12 h-12 rounded-full bg-white/20 border border-white/40 overflow-hidden flex items-center justify-center shadow-inner backdrop-blur-md">
                            <img id="avatarImg" src="" class="w-full h-full object-cover">
                        </div>
                        <input type="file" id="avatarInput" accept="image/*" onchange="handleAvatarUpload(this)">
                    </div>
                    <div class="ml-3 flex flex-col justify-center text-white">
                        <span id="parentName" contenteditable="true" class="text-base font-bold border-b border-transparent hover:border-white/50 outline-none leading-tight pb-0.5">å®¶é•¿å§“å</span>
                        <span contenteditable="true" class="text-xs opacity-80 border-b border-transparent hover:border-white/50 outline-none mt-0.5">ä¸‰å¹´çº§äºŒç­</span>
                    </div>
                    <div class="ml-auto opacity-30 text-white text-3xl sm:text-4xl font-serif leading-none select-none">â€</div>
                </div>
            </div>

            <!-- åº•éƒ¨ Slogan -->
            <div class="mt-auto text-center pb-2 pointer-events-auto">
                <h2 class="text-white text-xs sm:text-sm font-medium font-sans tracking-widest opacity-80 drop-shadow-md">
                    åšæœ‰æ¸©åº¦çš„æ•™è‚² &nbsp;&nbsp;&nbsp; åšæœ‰æ¢¦æƒ³çš„æ•™è‚²
                </h2>
            </div>
        </div>
    </div>

    <!-- ä¿å­˜æŒ‰é’® -->
    <button onclick="downloadCard()" class="mt-6 mb-10 bg-slate-700 hover:bg-slate-800 text-white font-medium py-3 px-8 rounded-full shadow-lg transition-all hover:scale-105 active:scale-95 flex items-center gap-2 text-sm z-50">
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"></path></svg>
        ä¿å­˜å›¾ç‰‡
    </button>

    <!-- ç»“æœé¢„è§ˆæ¨¡æ€æ¡† -->
    <div id="resultModal" onclick="closeModal()">
        <div class="text-white text-center mb-4 relative z-50" onclick="event.stopPropagation()">
            <p class="text-lg font-bold">å›¾ç‰‡å·²ç”Ÿæˆ</p>
            <p class="text-sm opacity-80 mt-1">è¯·é•¿æŒ‰ä¸‹æ–¹å›¾ç‰‡ä¿å­˜åˆ°ç›¸å†Œ</p>
        </div>
        <img id="resultImg" class="max-w-[90%] max-h-[75%] rounded-lg shadow-2xl border-2 border-white/20 relative z-50" alt="Result">
        <button onclick="closeModal()" class="mt-6 bg-white/20 hover:bg-white/30 text-white px-6 py-2 rounded-full text-sm backdrop-blur-sm transition-colors relative z-50" onclick="event.stopPropagation()">å…³é—­çª—å£</button>
    </div>

    <script>
        // --- 1. åŸºç¡€åŠŸèƒ½é€»è¾‘ ---
        
        const quotes = [
            "å¤©é“é…¬å‹¤ï¼Œåšç§¯è–„å‘", "æ˜Ÿå…‰ä¸é—®èµ¶è·¯äººï¼Œæ—¶å…‰ä¸è´Ÿæœ‰å¿ƒäººã€‚", "å­¦ä¹ ä¸ä»…ä»…æ˜¯ä¸ºäº†é‚£ä¸€å¼ è¯•å·ï¼Œè€Œæ˜¯ä¸ºäº†è®©ä½ æ‹¥æœ‰é€‰æ‹©ä¸–ç•Œçš„æƒåˆ©ã€‚", 
            "ä¸è¦å‡è£…åŠªåŠ›ï¼Œç»“æœä¸ä¼šé™ªä½ æ¼”æˆã€‚", "ä½ èƒŒä¸ä¸‹æ¥çš„ä¹¦ï¼Œæ€»æœ‰äººèƒ½èƒŒä¸‹æ¥ã€‚", "ç§ä¸€æ£µæ ‘æœ€å¥½çš„æ—¶é—´æ˜¯åå¹´å‰ï¼Œå…¶æ¬¡æ˜¯ç°åœ¨ã€‚",
            "å°†æ¥çš„ä½ ï¼Œä¸€å®šä¼šæ„Ÿè°¢ç°åœ¨æ‹¼å‘½åŠªåŠ›çš„è‡ªå·±ã€‚", "ä¸ç§¯è·¬æ­¥ï¼Œæ— ä»¥è‡³åƒé‡Œã€‚", "ä¹¾å¤æœªå®šï¼Œä½ æˆ‘çš†æ˜¯é»‘é©¬ã€‚",
            "åŠªåŠ›ä¸ä¸€å®šæˆåŠŸï¼Œä½†ä¸åŠªåŠ›ä¸€å®šå¾ˆè½»æ¾ï¼Ÿä¸ï¼Œä¸åŠªåŠ›çš„è½»æ¾æ˜¯æš‚æ—¶çš„ã€‚", "æ¯å¤©è¿›æ­¥ä¸€ç‚¹ç‚¹ï¼Œä¸€å¹´ä¹‹åå°±æ˜¯å·¨å¤§çš„é£è·ƒã€‚"
        ];

        function changeQuote() {
            const randomIndex = Math.floor(Math.random() * quotes.length);
            const mainText = document.getElementById('mainText');
            mainText.innerText = `"${quotes[randomIndex]}"`;
        }
        window.addEventListener('load', changeQuote);

        const plantAvatars = [
            '<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 100 100"><circle cx="50" cy="50" r="45" fill="#aaddaa"/><path d="M50 20 Q30 40 50 60 Q70 40 50 20 M50 60 L50 80 M40 70 L60 70" stroke="#558855" stroke-width="4" fill="none"/></svg>', 
            '<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 100 100"><circle cx="50" cy="50" r="45" fill="#ccccff"/><path d="M50 80 L50 40 M30 50 Q50 30 70 50" stroke="#6666aa" stroke-width="4" fill="none"/><circle cx="50" cy="35" r="10" fill="#8888cc"/></svg>',
            '<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 100 100"><circle cx="50" cy="50" r="45" fill="#ffddaa"/><rect x="45" y="50" width="10" height="30" fill="#885522"/><circle cx="50" cy="40" r="20" fill="#44aa44"/></svg>'
        ];
        function svgToPngDataUrl(svgString, callback) {
            const img = new Image();
            const base64 = window.btoa(unescape(encodeURIComponent(svgString)));
            img.src = 'data:image/svg+xml;base64,' + base64;
            img.onload = function() {
                const canvas = document.createElement('canvas');
                canvas.width = 100;
                canvas.height = 100;
                canvas.getContext('2d').drawImage(img, 0, 0);
                callback(canvas.toDataURL('image/png'));
            };
        }
        function setRandomAvatar() {
            const idx = Math.floor(Math.random() * plantAvatars.length);
            svgToPngDataUrl(plantAvatars[idx], function(url) {
                document.getElementById('avatarImg').src = url;
            });
        }
        setRandomAvatar();

        // å›¾ç‰‡ä¸Šä¼ é€šç”¨å¤„ç†
        function handleImageUpload(input, imgId) {
            if (input.files && input.files[0]) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    const img = document.getElementById(imgId);
                    img.src = e.target.result;
                    if(imgId === 'logoImg') {
                        img.classList.remove('h-8', 'sm:h-10');
                        img.style.maxHeight = "48px";
                        img.style.width = "auto";
                    }
                };
                reader.readAsDataURL(input.files[0]);
            }
        }
        function handleMainImageUpload(input) {
            if (input.files && input.files[0]) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    const img = document.getElementById('mainImg');
                    const placeholder = document.getElementById('mainImgPlaceholder');
                    const container = img.parentElement;
                    img.src = e.target.result;
                    img.classList.remove('hidden');
                    placeholder.classList.add('hidden');
                    container.classList.remove('border-2', 'border-dashed', 'border-white/30', 'min-h-[200px]', 'sm:min-h-[220px]');
                    container.style.height = 'auto';
                };
                reader.readAsDataURL(input.files[0]);
            }
        }
        function handleAvatarUpload(input) {
            if (input.files && input.files[0]) {
                const reader = new FileReader();
                reader.onload = (e) => document.getElementById('avatarImg').src = e.target.result;
                reader.readAsDataURL(input.files[0]);
            }
        }

        // --- 2. è´´çº¸ä¸æ ‡æ³¨ (å‡çº§ç‰ˆ) ---

        const annotationLayer = document.getElementById('annotation-layer');
        let isDrawingMode = false;
        let drawingType = 'rect'; // 'rect' or 'explosion'

        // ç‚¹å‡»ç©ºç™½å¤„å–æ¶ˆé€‰ä¸­æ‰€æœ‰è´´çº¸
        function deselectAllStickers() {
            document.querySelectorAll('.sticker-container').forEach(el => el.classList.remove('selected'));
        }

        // æ·»åŠ è´´çº¸
        function addSticker(emoji) {
            // å®¹å™¨
            const container = document.createElement('div');
            container.className = 'sticker-container selected'; // é»˜è®¤é€‰ä¸­
            container.style.left = '40%';
            container.style.top = '40%';
            
            // å†…å®¹
            const content = document.createElement('div');
            content.className = 'sticker-content';
            content.innerText = emoji;
            
            // ç§»åŠ¨æŠŠæ‰‹ (å°æ‰‹)
            const moveHandle = document.createElement('div');
            moveHandle.className = 'control-handle move-handle';
            moveHandle.innerText = 'âœ‹';
            
            // ç¼©æ”¾æŠŠæ‰‹ (ç®­å¤´)
            const resizeHandle = document.createElement('div');
            resizeHandle.className = 'control-handle resize-handle';
            resizeHandle.innerText = 'â†˜ï¸';

            // é€‰ä¸­é€»è¾‘
            container.addEventListener('click', function(e) {
                e.stopPropagation(); // é˜²æ­¢è§¦å‘bodyçš„å–æ¶ˆé€‰ä¸­
                deselectAllStickers();
                this.classList.add('selected');
            });

            // åŒå‡»åˆ é™¤
            container.addEventListener('dblclick', function(e) {
                e.stopPropagation();
                annotationLayer.removeChild(this);
            });

            // ç»‘å®šäº‹ä»¶
            makeDraggable(container, moveHandle);
            makeResizable(container, content, resizeHandle);

            container.appendChild(content);
            container.appendChild(moveHandle);
            container.appendChild(resizeHandle);
            annotationLayer.appendChild(container);

            // ç¡®ä¿å…¶ä»–å–æ¶ˆé€‰ä¸­
            deselectAllStickers();
            container.classList.add('selected');
        }

        // æ‹–æ‹½é€»è¾‘ (ç§»åŠ¨æŠŠæ‰‹æ§åˆ¶å®¹å™¨)
        function makeDraggable(container, handle) {
            let isDragging = false;
            let startX, startY, initialLeft, initialTop;

            function startDrag(e) {
                if (isDrawingMode) return;
                e.stopPropagation(); // é˜²æ­¢å†’æ³¡
                isDragging = true;
                const clientX = e.type.includes('touch') ? e.touches[0].clientX : e.clientX;
                const clientY = e.type.includes('touch') ? e.touches[0].clientY : e.clientY;
                
                startX = clientX;
                startY = clientY;
                initialLeft = container.offsetLeft;
                initialTop = container.offsetTop;
                
                e.preventDefault();
            }

            function drag(e) {
                if (!isDragging) return;
                e.preventDefault();
                const clientX = e.type.includes('touch') ? e.touches[0].clientX : e.clientX;
                const clientY = e.type.includes('touch') ? e.touches[0].clientY : e.clientY;

                const dx = clientX - startX;
                const dy = clientY - startY;

                container.style.left = (initialLeft + dx) + 'px';
                container.style.top = (initialTop + dy) + 'px';
            }

            function stopDrag() {
                isDragging = false;
            }

            handle.addEventListener('mousedown', startDrag);
            handle.addEventListener('touchstart', startDrag, {passive: false});
            
            window.addEventListener('mousemove', drag);
            window.addEventListener('touchmove', drag, {passive: false});
            
            window.addEventListener('mouseup', stopDrag);
            window.addEventListener('touchend', stopDrag);
        }

        // ç¼©æ”¾é€»è¾‘
        function makeResizable(container, content, handle) {
            let isResizing = false;
            let startX, startFontSize;

            function startResize(e) {
                e.stopPropagation();
                isResizing = true;
                const clientX = e.type.includes('touch') ? e.touches[0].clientX : e.clientX;
                startX = clientX;
                // è·å–å½“å‰å­—ä½“å¤§å° (parseIntå»æ‰px)
                const style = window.getComputedStyle(content, null).getPropertyValue('font-size');
                startFontSize = parseFloat(style);
                e.preventDefault();
            }

            function resize(e) {
                if (!isResizing) return;
                e.preventDefault();
                const clientX = e.type.includes('touch') ? e.touches[0].clientX : e.clientX;
                const dx = clientX - startX;
                
                // ç®€å•çš„ç¼©æ”¾ç®—æ³•ï¼šå‘å³æ‹–åŠ¨å¢å¤§ï¼Œå‘å·¦å‡å°
                // è°ƒèŠ‚çµæ•åº¦ / 2
                let newSize = startFontSize + dx / 2;
                if (newSize < 10) newSize = 10; // æœ€å°é™åˆ¶
                if (newSize > 200) newSize = 200; // æœ€å¤§é™åˆ¶

                content.style.fontSize = newSize + 'px';
            }

            function stopResize() {
                isResizing = false;
            }

            handle.addEventListener('mousedown', startResize);
            handle.addEventListener('touchstart', startResize, {passive: false});

            window.addEventListener('mousemove', resize);
            window.addEventListener('touchmove', resize, {passive: false});

            window.addEventListener('mouseup', stopResize);
            window.addEventListener('touchend', stopResize);
        }

        // ç”»å›¾é€»è¾‘ (çº¢æ¡† & çˆ†ç‚¸æ¡†)
        const drawingOverlay = document.getElementById('drawing-overlay');
        const drawRectBtn = document.getElementById('drawRectBtn');
        const drawExpBtn = document.getElementById('drawExpBtn');
        let isDrawing = false;
        let startX, startY;
        let currentBox = null;

        function toggleDrawingMode(type) {
            // å¦‚æœç‚¹å‡»å½“å‰å·²æ¿€æ´»çš„æ¨¡å¼ï¼Œåˆ™å…³é—­
            if (isDrawingMode && drawingType === type) {
                isDrawingMode = false;
                drawingOverlay.style.display = 'none';
                drawRectBtn.classList.remove('active');
                drawExpBtn.classList.remove('active');
                return;
            }

            // å¼€å¯æ–°æ¨¡å¼
            isDrawingMode = true;
            drawingType = type;
            drawingOverlay.style.display = 'block';
            
            // æ›´æ–°æŒ‰é’®çŠ¶æ€
            drawRectBtn.classList.remove('active');
            drawExpBtn.classList.remove('active');
            if (type === 'rect') drawRectBtn.classList.add('active');
            if (type === 'explosion') drawExpBtn.classList.add('active');
            
            // å–æ¶ˆæ‰€æœ‰è´´çº¸é€‰ä¸­
            deselectAllStickers();
        }

        function startBox(e) {
            isDrawing = true;
            const rect = drawingOverlay.getBoundingClientRect();
            const clientX = e.type.includes('touch') ? e.touches[0].clientX : e.clientX;
            const clientY = e.type.includes('touch') ? e.touches[0].clientY : e.clientY;
            
            startX = clientX - rect.left;
            startY = clientY - rect.top;

            currentBox = document.createElement('div');
            // æ ¹æ®æ¨¡å¼è®¾ç½®æ ·å¼
            if (drawingType === 'rect') {
                currentBox.className = 'red-box';
            } else {
                currentBox.className = 'explosion-box';
            }
            
            currentBox.style.left = startX + 'px';
            currentBox.style.top = startY + 'px';
            currentBox.style.width = '0px';
            currentBox.style.height = '0px';
            
            currentBox.addEventListener('dblclick', function() {
                annotationLayer.removeChild(this);
            });

            annotationLayer.appendChild(currentBox);
            e.preventDefault();
        }

        function drawBox(e) {
            if (!isDrawing || !currentBox) return;
            const rect = drawingOverlay.getBoundingClientRect();
            const clientX = e.type.includes('touch') ? e.touches[0].clientX : e.clientX;
            const clientY = e.type.includes('touch') ? e.touches[0].clientY : e.clientY;

            const currentX = clientX - rect.left;
            const currentY = clientY - rect.top;

            const width = Math.abs(currentX - startX);
            const height = Math.abs(currentY - startY);
            const left = Math.min(currentX, startX);
            const top = Math.min(currentY, startY);

            currentBox.style.width = width + 'px';
            currentBox.style.height = height + 'px';
            currentBox.style.left = left + 'px';
            currentBox.style.top = top + 'px';
            
            e.preventDefault();
        }

        function stopBox() {
            isDrawing = false;
            currentBox = null;
        }

        drawingOverlay.addEventListener('mousedown', startBox);
        drawingOverlay.addEventListener('mousemove', drawBox);
        drawingOverlay.addEventListener('mouseup', stopBox);
        
        drawingOverlay.addEventListener('touchstart', startBox, {passive: false});
        drawingOverlay.addEventListener('touchmove', drawBox, {passive: false});
        drawingOverlay.addEventListener('touchend', stopBox);

        // åˆ†ç±»æ¸…ç©º
        function clearStickers() {
            const stickers = document.querySelectorAll('.sticker-container');
            stickers.forEach(el => annotationLayer.removeChild(el));
        }

        function clearBoxes() {
            const boxes = document.querySelectorAll('.red-box, .explosion-box');
            boxes.forEach(el => annotationLayer.removeChild(el));
        }

        // --- 3. ç”Ÿæˆå›¾ç‰‡ ---
        function closeModal() {
            document.getElementById('resultModal').style.display = 'none';
        }

        function downloadCard() {
            if(isDrawingMode) {
                // å…³é—­ç»˜å›¾æ¨¡å¼
                isDrawingMode = false;
                drawingOverlay.style.display = 'none';
                drawRectBtn.classList.remove('active');
                drawExpBtn.classList.remove('active');
            }
            
            // å–æ¶ˆé€‰ä¸­æ‰€æœ‰è´´çº¸ï¼Œéšè—æŠŠæ‰‹
            deselectAllStickers();

            const element = document.getElementById("capture-area");
            const btn = document.querySelector('button[onclick="downloadCard()"]');
            const originalText = btn.innerHTML;
            btn.innerHTML = 'æ­£åœ¨ç”Ÿæˆ...';
            btn.disabled = true;

            const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
            const scale = isMobile ? 2 : 3;

            html2canvas(element, {
                scale: scale,
                useCORS: true,
                backgroundColor: null,
                logging: false,
                allowTaint: true,
                windowWidth: element.scrollWidth,
                windowHeight: element.scrollHeight,
                ignoreElements: (el) => el.hasAttribute('data-html2canvas-ignore') || el.id === 'drawing-overlay'
            }).then(canvas => {
                const imgData = canvas.toDataURL('image/jpeg', 0.95);
                if (isMobile) {
                    const resultImg = document.getElementById('resultImg');
                    resultImg.src = imgData;
                    document.getElementById('resultModal').style.display = 'flex';
                } else {
                    const link = document.createElement('a');
                    link.download = 'æ•™è‚²å¡ç‰‡_' + Date.now() + '.jpg';
                    link.href = imgData;
                    link.click();
                }
                btn.innerHTML = originalText;
                btn.disabled = false;
            }).catch(err => {
                console.error("Error:", err);
                alert("ç”Ÿæˆå‡ºé”™ï¼Œè¯·é‡è¯•");
                btn.innerHTML = originalText;
                btn.disabled = false;
            });
        }
    </script>
</body>
</html>